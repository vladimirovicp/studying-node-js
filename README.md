# studying-node-js

https://habr.com/ru/companies/ruvds/articles/424969/ \
https://webformyself.com/node-js-fs-fajlovaya-sistema/ /

### Содержание
* [Открытие файла](#fs.open)
* [Получение информации о файлах](#fs.stat)

## Работа с файловыми дескрипторами в Node.js

### <a name="fs.open">Открытие файла</a>
Синтаксис. Ниже приведен синтаксис метода для открытия файла в асинхронном режиме:
```
fs.open(path, flags[, mode], callback)
```
Параметры\
Ниже приводится описание используемых параметров —\
* path — это строка с именем файла, включая путь к нему.
* flags — указывают режим работы с файлом, который нужно открыть. Все возможные значения приведены ниже.
* mode — устанавливает режим файла (права доступа), но только если файл был создан. По умолчанию — 0666, чтение и запись.
* callback — это функция обратного вызова, которая принимает два аргумента (err, fd).

Прежде чем вы сможете взаимодействовать с файлами, находящимися в файловой системе вашего сервера, вам необходимо получить дескриптор файла.\
Дескриптор можно получить, воспользовавшись для открытия файла асинхронным методом open() из модуля fs:
```
const fs = require('fs')
fs.open('/Users/flavio/test.txt', 'r', (err, fd) => {
  //fd - это дескриптор файла
})
```
Обратите внимание на второй параметр, r, использованный при вызове метода fs.open(). Это — флаг, который сообщает системе о том, что файл открывают для чтения. Вот ещё некоторые флаги, которые часто используются при работе с этим и некоторыми другими методами:

>* r+ — открыть файл для чтения и для записи.
>* w+ — открыть файл для чтения и для записи, установив указатель потока в начало файла. Если файл не существует — он создаётся.
>* a — открыть файл для записи, установив указатель потока в конец файла. Если файл не существует — он создаётся.
>* a+ — открыть файл для чтения и записи, установив указатель потока в конец файла. Если файл не существует — он создаётся.

Файлы можно открывать и пользуясь синхронным методом fs.openSync(), который, вместо того, чтобы предоставить дескриптор файла в коллбэке, возвращает его:
```
const fs = require('fs')
try {
  const fd = fs.openSync('/Users/flavio/test.txt', 'r')
} catch (err) {
  console.error(err)
}
```
После получения дескриптора любым из вышеописанных способов вы можете производить с ним необходимые операции.

### <a name="fs.stat">Получение информации о файлах</a>
Синтаксис. Ниже приведен синтаксис метода для получения информации о файле:
```
fs.stat(path, callback)
```
Параметры \
Ниже приводится описание используемых параметров —
* path — это строка с именем файла, включая путь к нему.
* callback — это функция обратного вызова, которая принимает два аргумента (err, stats), где stats — это объект типа fs.Stats, который приведен в примере ниже.
  
Помимо атрибутов, которые приведены в примере ниже, в классе fs.Stats содержится несколько важных методов, которые можно использовать для проверки типа файла. Эти методы приведены в следующей таблице.
* stats.isDirectory() — Возвращает true, если тип файла — каталог.
* stats.isBlockDevice() — Возвращает true, если тип файла — блочное устройство.
* stats.isCharacterDevice() — Возвращает true, если тип файла — символьное устройство.
* stats.isSymbolicLink() — Возвращает true, если тип файла — символьная ссылка.
* stats.isFIFO() — Возвращает true, если тип файла — FIFO.
* stats.isSocket() — Возвращает true, если тип файла — сокет.


